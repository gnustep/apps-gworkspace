PACKAGE_NEEDS_CONFIGURE = YES

include $(GNUSTEP_MAKEFILES)/common.make

include ../gworkspace.make

PACKAGE_NAME = @PACKAGE_NAME@
VERSION = @PACKAGE_VERSION@

GNUSTEP_INSTALLATION_DIR = $(GNUSTEP_SYSTEM_ROOT)

ifeq ($(FOUNDATION_LIB), apple)
  GNUSTEP_INSTALLATION_DIR = /
endif

#
# MAIN APP
#
APP_NAME = GWorkspace
GWorkspace_PRINCIPAL_CLASS = GWorkspace
GWorkspace_APPLICATION_ICON=FileManager.tiff

GWorkspace_HAS_RESOURCE_BUNDLE = yes

#
# Additional libraries
#
ifeq ($(FOUNDATION_LIB), apple)
  ADDITIONAL_GUI_LIBS += -framework GWorkspace
  ADDITIONAL_GUI_LIBS += -framework Renaissance
else
  ADDITIONAL_GUI_LIBS += -lGWorkspace
endif

ifneq ($(GS_PATH), none)
  GWorkspace_RESOURCE_FILES = \
    Resources/Icons/* \
    Resources/English.lproj \
    Resources/French.lproj \
    Resources/German.lproj \
    Resources/Italian.lproj \
    Resources/Romanian.lproj \
    Resources/Spanish.lproj \
    Resources/Portuguese.lproj \
    Resources/Dutch.lproj \
    ../Viewers/BrowserViewer/BrowserViewer.viewer \
    ../Viewers/IconsViewer/IconsViewer.viewer \
    ../Viewers/SmallIconsViewer/SmallIconsViewer.viewer \
    ../ContentViewers/AppViewer/AppViewer.inspector \
    ../ContentViewers/FolderViewer/FolderViewer.inspector \
    ../ContentViewers/ImageViewer/ImageViewer.inspector \
    ../ContentViewers/SoundViewer/SoundViewer.inspector \
    ../ContentViewers/RtfViewer/RtfViewer.inspector \
    ../ContentViewers/InspectorViewer/InspectorViewer.inspector \
    ../ContentViewers/StringsViewer/StringsViewer.inspector \
    ../ContentViewers/PlistViewer/PlistViewer.inspector \
    ../ContentViewers/PdfViewer/PdfViewer.inspector 
else
  GWorkspace_RESOURCE_FILES = \
    Resources/Icons/* \
    Resources/English.lproj \
    Resources/French.lproj \
    Resources/German.lproj \
    Resources/Italian.lproj \
    Resources/Romanian.lproj \
    Resources/Spanish.lproj \
    Resources/Portuguese.lproj \
    Resources/Dutch.lproj \
    ../Viewers/BrowserViewer/BrowserViewer.viewer \
    ../Viewers/IconsViewer/IconsViewer.viewer \
    ../Viewers/SmallIconsViewer/SmallIconsViewer.viewer \
    ../ContentViewers/AppViewer/AppViewer.inspector \
    ../ContentViewers/FolderViewer/FolderViewer.inspector \
    ../ContentViewers/ImageViewer/ImageViewer.inspector \
    ../ContentViewers/SoundViewer/SoundViewer.inspector \
    ../ContentViewers/RtfViewer/RtfViewer.inspector \
    ../ContentViewers/StringsViewer/StringsViewer.inspector \
    ../ContentViewers/PlistViewer/PlistViewer.inspector \
    ../ContentViewers/InspectorViewer/InspectorViewer.inspector 
endif

GWorkspace_LANGUAGES = Resources/English \
			                Resources/French \
			                Resources/German \
			                Resources/Italian \
			                Resources/Romanian \
			                Resources/Spanish \
			                Resources/Portuguese \
                      Resources/Dutch

ifeq ($(FOUNDATION_LIB), apple)
  GWorkspace_LOCALIZED_RESOURCE_FILES = Localizable.strings \
			                		              Finder.nib \
                                        PrefWindow.nib \
                                        DefEditorPref.nib \
                                        XTermPref.nib \
                                        DefSortOrderPref.nib \
                                        ShelfPref.nib \
                                        DeskTopPref.nib \
                                        FileOpsPref.nib \
                                        IconsPref.nib \
                                        HiddenFilesPref.nib \
                                        InspectorsWin.nib \
                                        AttributesPanel.nib \
                                        ContentsPanel.nib \
                                        ToolsPanel.nib \
                                        PermissionsPanel.nib \
                                        FileOperationWin.nib \
                                        OpenWith.nib \
                                        RunExternal.nib 
else 
  GWorkspace_LOCALIZED_RESOURCE_FILES = Localizable.strings \
			                		              Finder.gorm \
                                        PrefWindow.gorm \
                                        DefEditorPref.gorm \
                                        XTermPref.gorm \
                                        DefSortOrderPref.gorm \
                                        ShelfPref.gorm \
                                        DeskTopPref.gorm \
                                        FileOpsPref.gorm \
                                        IconsPref.gorm \
                                        HiddenFilesPref.gorm \
                                        InspectorsWin.gorm \
                                        AttributesPanel.gorm \
                                        ContentsPanel.gorm \
                                        ToolsPanel.gorm \
                                        PermissionsPanel.gorm \
                                        FileOperationWin.gorm \
                                        OpenWith.gorm \
                                        RunExternal.gorm                                         
endif

ifeq ($(FOUNDATION_LIB), apple)
  GWorkspace_LOCALIZED_RESOURCE_FILES += MainMenu-OSX.gsmarkup
endif            

# The Objective-C source files to be compiled

ifneq ($(FOUNDATION_LIB), apple)
  GWorkspace_OBJC_FILES = main.m \
  GWorkspace.m \
  IconViewsIcon.m \
  GWSplitView.m \
  Watchers/Watcher.m \
  FileOperations/FileOperation.m \
  ViewersWindow.m \
  Shelf/Shelf.m \
  Shelf/ShelfIcon.m \
  TShelf/TShelfWin.m \
  TShelf/TShelfView.m \
  TShelf/TShelfViewItem.m \
  TShelf/TShelfIconsView.m \
  TShelf/TShelfIcon.m \
  Inspectors/InspectorsController.m \
  Inspectors/Attributes.m \
  Inspectors/Contents.m \
  Inspectors/Tools.m \
  Inspectors/Permissions.m \
  Inspectors/TimeDateView.m \
  Inspectors/GenericContsView.m \
  Apps/Apps.m \
  Finder/FinderShelf.m \
  Finder/FinderShelfIcon.m \
  Finder/FinderController.m \
  Desktop/DesktopWindow.m \
  Desktop/DesktopView.m \
  Desktop/DesktopViewIcon.m \
  Recycler/Recycler.m \
  Recycler/RecyclerViews.m \
  Recycler/RecyclerIcon.m \
  Preferences/PrefController.m \
  Preferences/DefEditorPref.m \
  Preferences/XTermPref.m \
  Preferences/DefSortOrderPref.m \
  Preferences/ShelfPref.m \
  Preferences/DeskTopPref.m \
  Preferences/FileOpsPref.m \
  Preferences/IconsPref.m \
  Preferences/HiddenFilesPref.m \
  History/History.m \
  Dialogs/Dialogs.m \
  Dialogs/OpenWithController.m \
  Dialogs/RunExternalController.m \
  Dialogs/CompletionField.m \
  Fiend/Fiend.m \
  Fiend/FiendLeaf.m 
else
  GWorkspace_OBJC_FILES = main.m \
  GWorkspace.m \
  IconViewsIcon.m \
  GWSplitView.m \
  Watchers/Watcher.m \
  FileOperations/FileOperation.m \  
  ViewersWindow.m \
  Shelf/Shelf.m \
  Shelf/ShelfIcon.m \
  TShelf/TShelfWin.m \
  TShelf/TShelfView.m \
  TShelf/TShelfViewItem.m \
  TShelf/TShelfIconsView.m \
  TShelf/TShelfIcon.m \
  Inspectors/InspectorsController.m \
  Inspectors/Attributes.m \
  Inspectors/Contents.m \
  Inspectors/Tools.m \
  Inspectors/Permissions.m \
  Inspectors/TimeDateView.m \
  Inspectors/GenericContsView.m \
  Apps/Apps.m \
  Finder/FinderShelf.m \
  Finder/FinderShelfIcon.m \
  Finder/FinderController.m \
  Desktop/DesktopWindow.m \
  Desktop/DesktopView.m \
  Desktop/DesktopViewIcon.m \
  Recycler/Recycler.m \
  Recycler/RecyclerViews.m \
  Recycler/RecyclerIcon.m \
  Preferences/PrefController.m \
  Preferences/DefEditorPref.m \
  Preferences/XTermPref.m \
  Preferences/DefSortOrderPref.m \
  Preferences/ShelfPref.m \
  Preferences/DeskTopPref.m \
  Preferences/FileOpsPref.m \
  Preferences/IconsPref.m \
  Preferences/HiddenFilesPref.m \
  History/History.m \
  Dialogs/Dialogs.m \
  Dialogs/OpenWithController.m \
  Dialogs/RunExternalController.m \
  Dialogs/CompletionField.m \
  Fiend/Fiend.m \
  Fiend/FiendLeaf.m 
endif
						 
-include GNUmakefile.preamble

-include GNUmakefile.local

include $(GNUSTEP_MAKEFILES)/aggregate.make

include $(GNUSTEP_MAKEFILES)/application.make

-include GNUmakefile.postamble
